language: python

python:
  - 3.5
  - 3.6
  - 3.7

stages:
# Testing stage for all commits on all branches except tags
  - name: test
  # if: NOT tag IS present
# Pypi deploy if tagged
  - name: pypi_deploy
  # if: tag =~ ^\d+\.\d+\.\d+$
# Anaconda deploy if tagged and deployed to pypi
  - name: anaconda_deploy
  # if: tag =~ ^\d+\.\d+\.\d+$



jobs:
  include:
    # Testing stage for all commits on all branches except tags
    - stage: test
      script:
        - echo "testing"
    # Pypi deploy if tagged
    - stage: pypi_deploy
      script:
        - echo "pypi deploy"
    # Anaconda deploy if tagged and deployed to pypi
    - stage: anaconda_deploy
      script:
        - echo "anaconda deploy"
